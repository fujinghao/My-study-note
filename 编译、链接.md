## 编译的流程

C/C++的编译过程包含了四个步骤：
1. 预处理
- 展开头文件：将源文件中用#include指令包含的头文件内容展开到源文件中，使得编译器可以看到完整的程序代码。
- 宏替换：把源文件中的宏定义进行文本替换。例如，将#define PI 3.14定义的PI在代码中替换为3.14。
- 去掉注释：将源文件中的注释部分删除，以减少编译的工作量和最终生成的目标文件大小。
- 条件编译处理：根据预编译指令（如#ifdef、#ifndef、#endif等）来决定哪些代码需要被编译，哪些代码需要被忽略。
2. 编译
- 词法分析：将源代码分解成一个个的记号（token），比如关键字、标识符、常量、运算符等。例如，把 “int a = 10;” 分解成 “int”“a”“=”“10” 等记号。
- 语法分析：根据编程语言的语法规则，将词法分析得到的记号组合成各种语法结构，如表达式、语句、函数等。如果代码存在语法错误，在这个阶段会被检测出来。例如，检查 “if (a)” 后面是否缺少花括号等。
- 语义分析：对语法分析得到的语法结构进行语义检查，确保代码的语义是正确的。比如检查变量是否在使用前进行了声明、类型是否匹配等
3. 汇编
- 将编译后的中间代码（通常是一种与机器无关的汇编语言形式）翻译成目标机器的机器语言指令，生成目标文件。目标文件中包含了机器指令和数据，以及一些符号表等信息，用于后续的链接过程。
4. 链接 
- 合并目标文件：将多个目标文件以及所需的库文件合并成一个可执行文件。例如，如果程序中调用了其他库函数，链接器会将这些库函数的目标代码合并到最终的可执行文件中。
- 符号解析：解决目标文件中对外部符号（如函数名、变量名等）的引用。链接器会查找这些符号在其他目标文件或库中的定义，并将它们正确地连接起来。
- 重定位：确定程序中的各个代码段和数据段在内存中的最终位置，并修正代码中的地址引用。例如，当一个函数在不同的目标文件中被调用时，链接器需要确定这个函数在内存中的实际地址，并修正调用处的地址。